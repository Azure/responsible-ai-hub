"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[429],{4081:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var s=n(5893),o=n(1151);const i={id:"pf-run-custom-chatbot-lab5'",title:"Lab# 5: Run custom chatbot",sidebar_position:5,slug:"/run-custom-chatbot"},a=void 0,r={id:"azure-prompt-flow/vscode/lab5-run-custom-chatbot/pf-run-custom-chatbot-lab5'",title:"Lab# 5: Run custom chatbot",description:"Now that you have updated the prompt flow logic to you use your own data and process the output, let\u2019s see if the Chat will generate relevant information pertaining to our Contoso dental data.",source:"@site/docs/azure-prompt-flow/vscode/lab5-run-custom-chatbot/lab5-run-custom-chatbot.md",sourceDirName:"azure-prompt-flow/vscode/lab5-run-custom-chatbot",slug:"/run-custom-chatbot",permalink:"/responsible-ai-hub/docs/run-custom-chatbot",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"pf-run-custom-chatbot-lab5'",title:"Lab# 5: Run custom chatbot",sidebar_position:5,slug:"/run-custom-chatbot"},sidebar:"promptFlowSidebar",previous:{title:"Lab# 4: Chatbot to use your data",permalink:"/responsible-ai-hub/docs/chatbot-with-your-data"},next:{title:"Lab# 6: Evaluate chatbot",permalink:"/responsible-ai-hub/docs/evaluate-chatbot"}},l={},c=[];function h(e){const t={code:"code",em:"em",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Now that you have updated the prompt flow logic to you use your own data and process the output, let\u2019s see if the Chat will generate relevant information pertaining to our Contoso dental data."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Run the Chat"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["To test the Chat flow, click on the ",(0,s.jsx)(t.strong,{children:"Run"})," icon"]}),"\n",(0,s.jsxs)(t.li,{children:["On top of the page, select ",(0,s.jsx)(t.strong,{children:"Run it with interactive mode (text-only)"})," option."]}),"\n",(0,s.jsxs)(t.li,{children:["Enter the input below for the ",(0,s.jsx)(t.strong,{children:"User"})," prompt and click enter."]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"what is your dental clinic address?\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(6738).Z+"",width:"1079",height:"600"})}),"\n",(0,s.jsxs)(t.ol,{start:"4",children:["\n",(0,s.jsxs)(t.li,{children:["Finally, enter the input below for the ",(0,s.jsx)(t.strong,{children:"User"})," prompt and click enter."]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"what is your dental clinic's phone number?\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(5240).Z+"",width:"1034",height:"547"})}),"\n",(0,s.jsxs)(t.ol,{start:"5",children:["\n",(0,s.jsx)(t.li,{children:"Now, let's try a question that is not in our data to test if AI chatbot is grounded our custom data. Enter the following question:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"Who is the author of Hamlet?\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"6",children:["\n",(0,s.jsx)(t.li,{children:"You should get the following response:"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(593).Z+"",width:"1079",height:"594"})}),"\n",(0,s.jsxs)(t.p,{children:["As you can see, our chat produces a response that is factual but ",(0,s.jsx)(t.em,{children:"Hamlet"})," not in our Contoso dental data.As you can see Hamlet is not is our contoso dental data. This show that our chatbot is has problems still grounded to our data.  In the next exercise, we\u2019ll learn how to use the prompt engineering to add rules to our chatbot to restrict its response."]}),"\n",(0,s.jsx)(t.p,{children:"Handle Groundedness issues"}),"\n",(0,s.jsx)(t.p,{children:"Always an LLM model may be eager to provide the user with a response.  It\u2019s important to make sure that the model is not providing response to questions that are out of scope with subject domain of your data.  Another issue is the response may provide information that is not factual and, in some cases, even provide reference to the answer that appears legitimate.  This is a risk, because the information provided to the user can have negative or harmful consequences."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Grounding outputs"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Open the ",(0,s.jsx)(t.strong,{children:"flow.dag.yaml"})," file.  In the ",(0,s.jsx)(t.strong,{children:"promt"})," section,"]}),"\n",(0,s.jsxs)(t.li,{children:["Click on the ",(0,s.jsx)(t.strong,{children:".jinja2"})," link to open the prompt editor.  This will open a new tab in the editor."]}),"\n",(0,s.jsxs)(t.li,{children:["Modify the ",(0,s.jsx)(t.strong,{children:"system"})," text.  Then, copy the following text:"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"system:\n You are an AI system designed to answer questions from users in a designated context. When presented with a scenario, you must reply with accuracy to inquirers' inquiries using only descriptors provided in that same context. Only provided information in the vector index scope. If there is ever a situation where you are unsure of the potential answers, simply respond with \"I don't know.\nPlease add citation after each sentence when possible in a form. \n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(3226).Z+"",width:"1300",height:"356"})}),"\n",(0,s.jsxs)(t.ol,{start:"5",children:["\n",(0,s.jsx)(t.li,{children:"Close the .jinja2 prompt editor tab.  Then return to the flow.dag.yaml tab."}),"\n",(0,s.jsxs)(t.li,{children:["To test the Chat flow, click on the ",(0,s.jsx)(t.strong,{children:"Run"})," icon. Then select ",(0,s.jsx)(t.strong,{children:"Run it with interactive mode (text-only)"})," option."]}),"\n",(0,s.jsx)(t.li,{children:"Now, let's enter the following question again:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"Who is the author of Hamlet?\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(9345).Z+"",width:"1040",height:"611"})}),"\n",(0,s.jsx)(t.p,{children:"As you can see, the chatbot is now responding with \u201cI don\u2019t know\u201d when the question is not in our vector index for contoso dental."}),"\n",(0,s.jsxs)(t.ol,{start:"8",children:["\n",(0,s.jsx)(t.li,{children:"Let's verify again the address our the dental clinic.  Enter the following question:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"what is the dental clinic address?\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"7",children:["\n",(0,s.jsx)(t.li,{children:"Finally, enter the following question:"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"My tooth is aching really bad.  What could be the cause?\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:n(4477).Z+"",width:"1290",height:"608"})})]})}function d(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},4477:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/toothache-decay-c2be2b32cde4974f1f38b57ec0451fd7.png"},3226:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/update-prompt-grnd-41f7d3e8ddf2917777c013deba93d026.png"},6738:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/what-is-address-grnd-2c2c8063f11da5362f3b804109b5268c.png"},9345:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/what-is-hamlet-dontknow-29e6380a145824a364e53c7e39aa89fa.png"},593:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/what-is-hamlet-grnd-db6d7e633ea0f9e2544c5dcd74299194.png"},5240:(e,t,n)=>{n.d(t,{Z:()=>s});const s=n.p+"assets/images/what-is-phone-grnd-aecfc89f5dfdfcc23efdabe48a16afef.png"},1151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>a});var s=n(7294);const o={},i=s.createContext(o);function a(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);